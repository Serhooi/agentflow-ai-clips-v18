# AgentFlow AI Clips v21.0.0

–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –∫–ª–∏–ø–æ–≤ —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ —Å—É–±—Ç–∏—Ç—Ä–∞–º–∏ –∏ –∫–∞—Ä–∞–æ–∫–µ-—ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏.

## üöÄ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **Whisper.cpp** - –ª–µ–≥–∫–∞—è –∏ –±—ã—Å—Ç—Ä–∞—è –≤–µ—Ä—Å–∏—è Whisper –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏
- **–°–∏—Å—Ç–µ–º–∞ –æ—á–µ—Ä–µ–¥–µ–π** - —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–æ–∫
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö —Å 512MB RAM
- **ASS —Å—É–±—Ç–∏—Ç—Ä—ã** - –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–∞—Ä–∞–æ–∫–µ-—ç—Ñ—Ñ–µ–∫—Ç—ã
- **Burned-in –≤–∏–¥–µ–æ** - –≤–∏–¥–µ–æ —Å –≤—à–∏—Ç—ã–º–∏ —Å—É–±—Ç–∏—Ç—Ä–∞–º–∏
- **Supabase –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –¥–æ—Å—Ç–∞–≤–∫–∞ –≤–∏–¥–µ–æ

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- FFmpeg
- 512MB+ RAM
- Supabase –∞–∫–∫–∞—É–Ω—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- OpenAI API –∫–ª—é—á

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/Serhooi/agentflow-ai-clips-v18.git
cd agentflow-ai-clips-v18

# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤–µ—Ç–∫—É —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π
git checkout whisper-cpp-queue

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª, –¥–æ–±–∞–≤–∏–≤ –≤–∞—à–∏ –∫–ª—é—á–∏ API
```

## üöÄ –ó–∞–ø—É—Å–∫

```bash
# –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
python app.py

# –ò–ª–∏ —Å uvicorn
uvicorn app:app --host 0.0.0.0 --port 10000
```

## üåê API Endpoints

### –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ

```
POST /api/videos/upload
```

–ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤–∏–¥–µ–æ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID.

### –ê–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ

```
POST /api/videos/analyze
```

–°—Ç–∞–≤–∏—Ç –≤–∏–¥–µ–æ –≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ –∞–Ω–∞–ª–∏–∑ –∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—é.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```
GET /api/videos/{video_id}/status
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ:
- `queued` - –≤ –æ—á–µ—Ä–µ–¥–∏ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É
- `processing` - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
- `completed` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
- `error` - –æ—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–∞

```
GET /api/videos/{video_id}/transcript
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç –≤–∏–¥–µ–æ —Å word-level —Ç–∞–π–º–∏–Ω–≥–∞–º–∏.

### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤

```
GET /api/videos/{video_id}/highlights
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∏–ø–æ–≤.

### –ü–æ–ª—É—á–µ–Ω–∏–µ ASS —Å—É–±—Ç–∏—Ç—Ä–æ–≤

```
GET /api/videos/{video_id}/subtitles/ass
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç ASS —Å—É–±—Ç–∏—Ç—Ä—ã —Å –∫–∞—Ä–∞–æ–∫–µ-—ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è

```
GET /health
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–∏—Å—Ç–µ–º–µ.

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ [Supabase](https://supabase.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ bucket `video-results` —Å –ø—É–±–ª–∏—á–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º:

```sql
INSERT INTO storage.buckets (id, name, public) 
VALUES ('video-results', 'video-results', true);
```

3. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-key
```

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Render.com

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫ Render.com
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Web Service
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ:
   - **Repository**: `https://github.com/Serhooi/agentflow-ai-clips-v18`
   - **Branch**: `whisper-cpp-queue`
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `python app.py`
4. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   - `OPENAI_API_KEY`
   - `SUPABASE_URL`
   - `SUPABASE_ANON_KEY`
   - `SUPABASE_SERVICE_ROLE_KEY`
5. –ù–∞–∂–º–∏—Ç–µ "Create Web Service"

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **RAM**: 512MB-1GB
- **–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: 1 –≤–∏–¥–µ–æ
- **–û—á–µ—Ä–µ–¥—å**: –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è
- **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏**: ~1-2 –º–∏–Ω—É—Ç—ã –Ω–∞ –≤–∏–¥–µ–æ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)

## üîç –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ "Out of Memory"

–£–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç RAM –Ω–∞ Render.com –¥–æ 1GB –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ—â–µ –±–æ–ª–µ–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å:

```python
whisper_model = WhisperModel("tiny.en", device="cpu", compute_type="int8")
```

### –û—à–∏–±–∫–∞ —Å Supabase

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∫–ª—é—á–µ–π –∏ URL. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ:

```
SUPABASE_URL=
SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=
```

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

