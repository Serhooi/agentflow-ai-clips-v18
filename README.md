# AgentFlow AI Clips v20.1.0 - WhisperX Upgrade

–£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å WhisperX –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è word-level —Ç–∞–π–º–∏–Ω–≥–æ–≤ —Å—É–±—Ç–∏—Ç—Ä–æ–≤.

## üöÄ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### WhisperX –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **Word-level —Ç–∞–π–º–∏–Ω–≥–∏** - —Ç–æ—á–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–≤–∞
- **–£–ª—É—á—à–µ–Ω–Ω–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ** —Ç–µ–∫—Å—Ç–∞ —Å –∞—É–¥–∏–æ
- **Fallback –Ω–∞ OpenAI** Whisper API –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ WhisperX
- **CPU –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** –¥–ª—è Render.com

### –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å—É–±—Ç–∏—Ç—Ä—ã
- –ë–æ–ª–µ–µ —Ç–æ—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–ª–æ–≤ —Å –≤–∏–¥–µ–æ
- –õ—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∫–∞—Ä–∞–æ–∫–µ-—ç—Ñ—Ñ–µ–∫—Ç–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

## üìã –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç v18.3.0

### –î–æ–±–∞–≤–ª–µ–Ω–æ
- `whisperx` –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏
- `torch` –∏ `torchaudio` –¥–ª—è WhisperX
- –§—É–Ω–∫—Ü–∏—è `init_whisperx()` –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π
- –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `safe_transcribe_audio()` —Å WhisperX

### –ò–∑–º–µ–Ω–µ–Ω–æ
- –í–µ—Ä—Å–∏—è API: `18.1.7` ‚Üí `20.1.0`
- –û–ø–∏—Å–∞–Ω–∏–µ: –¥–æ–±–∞–≤–ª–µ–Ω–æ "—Å —É–ª—É—á—à–µ–Ω–Ω—ã–º–∏ —Å—É–±—Ç–∏—Ç—Ä–∞–º–∏ WhisperX"
- –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç WhisperX, fallback –Ω–∞ OpenAI

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install -r requirements.txt
```

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
OPENAI_API_KEY=your_openai_key
SUPABASE_URL=your_supabase_url (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
SUPABASE_ANON_KEY=your_anon_key (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
SUPABASE_SERVICE_ROLE_KEY=your_service_key (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

## üöÄ –ó–∞–ø—É—Å–∫

```bash
python app.py
```

## üìä –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

API endpoint `/health` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å:
- `whisperx`: –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å WhisperX
- `supabase`: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase
- `openai`: OpenAI API

## üîÑ Fallback –ª–æ–≥–∏–∫–∞

1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: WhisperX –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
2. **Fallback**: OpenAI Whisper API –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
3. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å word-level —Ç–∞–π–º–∏–Ω–≥–∞–º–∏

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **WhisperX**: –ë—ã—Å—Ç—Ä–µ–µ –Ω–∞ CPU, –ª—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- **–ü–∞–º—è—Ç—å**: –ú–æ–¥–µ–ª–∏ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω–æ
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: `int8` compute type –¥–ª—è CPU

